void 0===TCB_Front.js_modules["lead-generation"]&&TCB_Front.setModuleLoadedStatus("lead-generation",!1),((t,e)=>{if(e.isModuleLoaded("lead-generation"))return;t(window).on("tcb_after_dom_ready",(()=>{const r=t(e.Utils.isEditorPage()?"#tve_editor":"body");a.initRadioInputs(r),a.initCheckboxInputs(r),e.Utils.isEditorPage()||(t(".thrv_lead_generation").tve_front_lead_generation(),a.initRecaptcha())}));const a={initRadioInputs(e){t('[data-default="1"]').closest(".tve_lg_radio_wrapper").addClass("tve-state-expanded"),e.off("change.inputradio").on("change.inputradio",".tve_lg_radio_wrapper input",(function(){const e=t(this).closest(".tve_lg_radio_wrapper");e.siblings(".tve-state-expanded").removeClass("tve-state-expanded"),e.addClass("tve-state-expanded")}))},initCheckboxInputs(e){e.off("change.inputcheckbox").on("change.inputcheckbox",".tve_lg_checkbox_wrapper input",(function(){const e=t(this);e.closest(".tve_lg_checkbox_wrapper").toggleClass("tve-state-expanded",e.prop("checked"))}))},initRecaptcha(){const e=t(".tve-captcha-container");if(e.length&&0!==tve_dash_front.recaptcha.length){function a(){"undefined"!=typeof grecaptcha&&grecaptcha.render?function(){let a=100;e.filter(":not(.tve-recapcha-rendered)").each((function(){if(document.getElementById(this.id)){this.id=this.id+"-"+ ++a;const e=t(this),r=window.innerWidth<400?"compact":e.attr("data-size");e.addClass("tve-recaptcha-rendered"),e.data("grecaptcha-render")||tve_dash_front.recaptcha.connection&&(!tve_dash_front.recaptcha.connection||"v3"===tve_dash_front.recaptcha.connection.version)||(e.data("grecaptcha-render",!0),grecaptcha.render(this.id,{sitekey:tve_dash_front.recaptcha.site_key||e.attr("data-site-key"),theme:e.attr("data-theme"),type:e.attr("data-type"),size:r}))}}))}():setTimeout(a,50)}let r=!1;const n=tve_dash_front.recaptcha.connection&&"v3"===tve_dash_front.recaptcha.connection.version&&!tve_dash_front.recaptcha.connection.browsing_history?tve_dash_front.recaptcha.site_key:"explicit";window.tve_gapi_loaded||(t.getScript("https://www.google.com/recaptcha/api.js?render="+n,a),r=!0,window.tve_gapi_loaded=!0),r||a()}},hasFileUpload:()=>e.isModuleLoaded("file-upload")};t.fn.tve_front_lead_generation=function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return window.TCB_PAGE_INDEX=window.TCB_PAGE_INDEX||1,this.each(((n,i)=>{const o=t(i);let s=o.find("form");const d=s.find(".tve-f-a-hidden").val();if(0===s.length&&(o.find(".thrv_lead_generation_container").wrapInner('<form method="post"></form>'),s=o.find("form")),s.find(".tve_lg_textarea.tve-lg-show-counter textarea").off("input.textarea").on("input.textarea",(function(){const e=t(this),a=e.val().length,r=Number(e.attr("maxlength")),n=Number(e.attr("data-min")),i=e.next().find(".tve-fill-text-dynamic");i.text(r?`${a} of ${r}`:a),i.toggleClass("tve-counter-error",!!(a&&n&&a<n))})),s.find('input[type="checkbox"],input[type="radio"]').each((function(){if(!this.id)return!0;t("#"+this.id).not(this).length&&(this.id=this.id+"-"+window.TCB_PAGE_INDEX++,t(this).next("label").attr("for",this.id))})),void 0!==d&&"#"===s.attr("action")&&s.attr("action",d),o.data("tve_lg_done"))return this;if(o.data("tve_lg_done",!0),void 0!==window.SegMet&&SegMet&&-1!==s[0].action.indexOf("infusionsoft")&&!s.data("tve-segmet-submit")){s.data("tve-segmet-submit",1);const t=s[0].submit;s[0].submit=function(){return s.data("tve-segmet-submitted")?t.call(s[0]):(s.data("tve-segmet-submitted",1),s.submit())}}const c={errClass:"tve-lg-error",errClassMultiple:"tve-lg-error-multiple",init(){this.container=s.closest(".thrv_lead_generation").find("#tve-lg-error-container"),this.container.length||(this.container=t('<div id="tve-lg-error-container"></div>').prependTo(s.parent()),this.container.on("click",".tve-lg-err-close",t.proxy(this.close,this))),this.container.empty().hide(),this.clear()},close(){this.container.fadeOut(200);let t=s.find("."+this.errClass);return t.length||(t=s.find("input,select,textarea")),t.first().trigger("focus"),!1},clear(){s.find("input,select,textarea").removeClass(this.errClass),s.find('[class^="tve_lg_"]').removeClass(this.errClassMultiple+" "+this.errClass),"function"==typeof r.clearErrors&&r.clearErrors.apply(this,arguments)},markApiError(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"function"==typeof r.renderError?r.renderError(a,e,n):this.container.append('<div class="tve-lg-err-item tve-lg-ext-err">'+e+"</div>"),this},_markError(t,e,a){if("function"==typeof r.renderError)return r.renderError.call(this,t,e,a);if(t){const e=t.parent();e.removeClass("tcb-permanently-hidden"),e.closest("form").find(`[data-label-for="${e.attr("data-label")}"]`).removeClass("tcb-permanently-hidden"),t.addClass(this.errClass);let a=t.attr("data-field")?t.attr("data-field").replace("mapping_",""):t.attr("type");"gdpr"===a&&(a="checkbox"),["radio","checkbox"].includes(a)?t.closest(".tve_lg_"+a).addClass(this.errClassMultiple):"select"===a&&t.closest(".tve_lg_dropdown").addClass(this.errClass)}"required"===a&&this.container.find(".tve-lg-required").length||this.container.append('<div class="tve-lg-err-item tve-lg-'+a+'">'+e+"</div>")},show(){if("function"==typeof r.renderError)return;this.container.append('<a href="javascript:void(0)" class="tve-lg-err-close" title="Close"><span class="thrv-icon thrv-svg-icon">'+e.icons.get("cross")+"</span></a>");const t=this;setTimeout((function(){const e=s.offset(),a=parseInt(s.css("margin-top"));let r=-10-t.container.outerHeight(!0)-(isNaN(a)?0:a);s.parents(".thrv-ribbon").length?"bottom"===s.parents(".tve-leads-ribbon").attr("data-position")?r+=7:r=e.top+s.outerHeight():t.container.outerHeight(!0)>e.top&&(r=e.top+s.outerHeight()),t.container.css({top:r+"px",width:s.outerWidth()}).fadeIn(200)}),50)},required(e,a){let r,n="required";const i=e.attr("type");if("hidden"===i)r=!0;else if("radio"===i)r=t('input[name="'+e.attr("name")+'"]').is(":checked");else if("checkbox"===i)r=t('input[name="'+e.attr("name")+'"]').is(":checked");else if(e.is("textarea[data-min]")){const i=t.trim(e.val()).length;r=i>=e.attr("data-min"),!r&&i&&(n="min-chars",a=tve_frontend_options.translations.min_chars.replace("%s",e.attr("data-min")))}else{const a=e.attr("value")?e.attr("value"):e.val();r=t.trim(a).length>0}return r||this._markError(e,a,n),r},password(t,e){let a=!0;return t.val()||1!==t.data("required")||(a=!1),!!a||(this._markError(t,e,"password"),!1)},mismatch(t,e){let a=!0;return t.password&&t.password.val()!==t.confirm_password.val()&&(a=!1),!!a||(this._markError(t.confirm_password,e,"passwordmismatch"),!1)},email(t,e){return!(t.val()&&!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.val())&&(this._markError(t,e,"email"),1))},getErrors(t){try{return JSON.parse(t.find(".tve-lg-err-msg").val())}catch(t){return{file_extension:"Sorry, {fileextension} files are not allowed",file_size:"{file} exceeds the maximum file size of {filelimit}",required:"Please fill in all of the required fields",phone:"The phone number is not valid",email:"The email address is not valid"}}}};let l;a.hasFileUpload()&&(l=new e.FileUpload(o));const p=function(a,r){const n=t.extend({success:"Sign up successful",error:"Error!"},r),i=s.find("#_form_type").val(),o=s.find("input[name=name]").val()?s.find("input[name=name]").val():"",d=s.find("input[name=email]").val();if(a){s.parents(".tl-style").first().find(".tve_p_lb_close").trigger("click");const a=t.Event("leads_messages.tcb");s.trigger(a),"lead_generation"===i&&(s.find("input").val(""),s.parents(".tve_p_lb_content").find(".tve_p_lb_close").trigger("click")),n.success=n.success.replace("[lead_email]",d),n.success=n.success.replace("[lead_name]",o),e.notificationElement.toggle(n.success,"success","")}else{const t=s.parent(),a=t.parent(),r=a.find(".tve-error-wrapper"),i=s.find("#_error_message_option").val();if(1===parseInt(i))t.hide(),0===r.length?(a.append('<div class="tve-error-wrapper"><div class="tve-error-content"></div><button class="tve-close-error-message">Retry</button></div>'),n.error=n.error.replace("[lead_email]",d),n.error=n.error.replace("[lead_name]",o),a.find(".tve-error-content").append(n.error)):a.find(".tve-error-wrapper").show();else{if(h())return;e.notificationElement.toggle(n.success,"success",""),_(),u()}}s.tve_form_loading(!0)},f=function(t){return t&&t.length>0?t+",":""};function u(){s.find(".tve-state-expanded").removeClass("tve-state-expanded"),s.find(".tve_lg_dropdown").each((function(){const e=t(this),a=e.attr("data-show-placeholder"),r=e.find('[data-default="1"]'),n=r.length?r:e.find(".tve-lg-dropdown-option,.tve-dynamic-dropdown-option").first(),i=e.find("input");a?(e.find(".tve-lg-dropdown-trigger .tve-disabled-text-inner").html(i.attr("data-placeholder")),i.removeAttr("value")):(e.find(".tve-lg-dropdown-trigger .tve-disabled-text-inner").html(n.text()),i.attr("value",n.attr("data-value")))})),s[0].reset(),s.find("textarea").trigger("input"),s.find('input[type="radio"][data-default="1"], input[type="checkbox"][data-default="1"] ').attr("checked","checked").closest(".tve_lg_radio_wrapper, .tve_lg_checkbox_wrapper").addClass("tve-state-expanded"),e.smartComplete.handleSmartComplete(s)}function h(){let a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const i=s.find("#_error_message_option").val(),o=s.find("#_autofill").val(),d=s.find("#_submit_option").val(),c=o?s.find("input").not("input[type=hidden],input[type=password]").serializeArray():"";let l=!1;if(!d||"reload"===d&&(a||1!==i))l=!0,location.reload();else if("redirect"===d){let t=s.find("#_back_url").val();t=e.Utils.addHttp(t),o&&c&&!e.Utils.isExternal(t)&&e.setCookie("account_create_fields",JSON.stringify(c),{path:"/"}),"1"===s.find("#_sendParams").val()&&(t=e.Utils.appendFormParamsToURL(t,s)),t&&e.isValidUrl(t)&&(a||1!==i)&&(location.href=t,l=!0)}else if("state"===d&&a){const e=TL_Front.parent_state,a=s.find(".tve-switch-state-trigger"),r=-1!==a.attr("data-tcb-events").indexOf("tl_state_lightbox"),n=s.parents(".tve_post_lightbox").length>0;if(a.trigger("click"),s.tve_form_loading(!0),r)if(n)e&&(TL_Front.close_form(e),delete TL_Front.parent_state);else{const e=t.Event("leads_messages.tcb");e.lightbox_state=!0,s.trigger(e)}TL_Front.parent_state&&(s.parents(".tl-style").first().find(".tve_p_lb_close").trigger("click"),delete TL_Front.parent_state),l=!0}else"klicktipp-redirect"===d&&a?r&&e.isValidUrl(r)&&(location.href=r,l=!0):"page"===d&&a&&n&&e.isValidUrl(n)&&(location.href=n,l=!0);return l}function _(){t(".tve_p_lb_background.tve_lb_open .tve_p_lb_close").trigger("click")}o.data("form-target")&&o.data("form-target").length&&o.find("form").attr("target",o.data("form-target")),function(){const a=e.queryString.get("affiliate");if(a){const e=t("<input/>");e.attr("type","hidden").attr("name","tve_affiliate").val(a),s.append(e)}}(),o.find(".tve-lg-err-msg").length&&function(){s.find(".tve_submit_container .thrv_icon").on("click",(function(){s.submit()})),s.find(".tve-form-button .tve-form-button-submit").on("click",(t=>(t.preventDefault(),t.stopPropagation(),s.submit(),!1)));const n=c.getErrors(o),i=function(i,d,g){if(s.data("tve-force-submit"))return!0;const v=s.find(".consent-config");v.length&&!v.attr("value")&&"none"!==s.find(".tcb-lg-consent").css("display")&&s.find('[name="user_consent"]').attr("data-required",1);let m=!0;const b=t(d),w={};c.init(),b.find("input, select, textarea").each((function(){const e=t(this),a=e.data("validation"),r=parseInt(this.dataset.required);"password"===e.attr("type")&&(w[e.attr("name")]=e),1===r&&(c.required(e,n.required)||(m=!1)),void 0!==a&&"none"!==a&&c[a]&&(c[a](e,n[a])||(m=!1))}));const y=b.find('textarea[name="g-recaptcha-response"]');if(y.length>0&&(y.first().val()||(c.markApiError("Please validate captcha form",b.find(".tve-captcha-container"),"captcha"),setTimeout((function(){t("#tve-lg-error-container").fadeOut("slow")}),5e3),m=!1)),2===Object.keys(w).length&&(c.mismatch(w,n.passwordmismatch)||(m=!1)),a.hasFileUpload()&&l){const t=l.isValid();!0!==t&&(m=!1,c.markApiError(t,l.$el,"upload"))}if(!m)return c.show(),s.find("."+c.errClass).first().trigger("focus"),!1;if("function"==typeof r.showFormLoader?r.showFormLoader():s.tve_form_loading(),"api"===s.parents(".thrv_lead_generation").attr("data-connection")||s.parents(".tcb-registration-form").length){const d=s.find("#_autofill").val()?s.find("input").not("input[type=hidden],input[type=password]").serializeArray():"";if(o.attr("data-settings-id")||function(){const t=function(){let t="";return"true"===s.find(".tve_lg_radio").attr("data-answer-tag")?s.find(".tve_lg_radio input[type=radio]").each(((e,a)=>{if(a.checked)if(a.attributes["data-custom-tag"]){const e=a.attributes["data-custom-tag"].value;t=t.length>0?t+","+e:e}else{const e=a.value;t=t.length>0?t+","+e:e}})):s.find(".tve_lg_radio input[type=radio]").each(((e,a)=>{a.checked&&a.attributes["data-custom-tag"]&&(t=a.attributes["data-custom-tag"].value)})),t}(),e=function(){let t="";return"true"===s.find(".tve_lg_checkbox:not(.tcb-lg-consent)").attr("data-answer-tag")?s.find(".tve_lg_checkbox input[type=checkbox]").each(((e,a)=>{if(a.checked)if(a.attributes["data-custom-tag"]){const e=a.attributes["data-custom-tag"].value;t=t.length>0?t+","+e:e}else{const e=a.value;t=t.length>0?t+","+e:e}})):s.find(".tve_lg_checkbox input[type=checkbox]").each(((e,a)=>{if(a.checked&&a.attributes["data-custom-tag"]){const e=a.attributes["data-custom-tag"].value;t=t.length>0?t+","+e:e}})),t}(),a=function(){let t="";const e=s.find(".tve_lg_dropdown"),a=e.find(".tve-lg-dropdown-option.tve-state-active");return t="true"===e.attr("data-answer-tag")?a.attr("data-custom-tag")?a.length>0?a.attr("data-custom-tag"):"":a.length>0?a.attr("data-value"):"":a.length>0?a.attr("data-custom-tag"):"",t}(),r=f(t)+f(e)+f(a);var n;r.length&&(n=r,tve_frontend_options.lead_generation_custom_tag_apis.forEach((t=>{const e=s.find(`input[type=hidden]#${t}_tags`);let a=e.length>0?e.attr("value"):"";e.length&&(0===a.length&&","===n.slice(-1)&&(n=n.slice(0,-1)),a=n.replace(/['"`\\]/g,"")+a,e.attr("value",a))})))}(),"function"==typeof r.submitHandler){const t={autofillValues:d,token:g};return a.hasFileUpload()&&l&&(t.uploader=l),r.submitHandler.call(null,i,t)}const v={};t.each(s.serializeArray(),(function(t,e){v[e.name]=e.value}));let m=s.serialize()+"&action=tve_api_form_submit&url="+encodeURIComponent(location.href);const b=s.find("#_submit_option").val();m+="&_tcb_id="+(o.attr("data-settings-id")||"")+"&tcb_token="+(10*Date.now()).toString(32),s.find(".tve_lg_radio_wrapper input,.tve_lg_checkbox_wrapper input").each(((t,e)=>{!e.name||v[e.name]||m.includes(e.name)||(v[e.name]="",m+=`&${e.name}=`)}));const w=t.Event("form_conversion.tcb");s.trigger(w),w.post_data&&(m+="&"+t.param(w.post_data));const y=s.closest(".tar-main-content[data-post-id]"),x=y.length?y.attr("data-post-id"):tve_frontend_options.post_id;return x&&(m+=`&post_id=${x}`),m+=`&frontend_post_id=${tve_frontend_options.post_id}`,g&&(m+="&g-recaptcha-response="+g),a.hasFileUpload()&&l&&(m=l.appendExtraData(m)),t.ajax({type:"post",xhrFields:{withCredentials:!0},url:tve_frontend_options.ajaxurl,dataType:"json",data:m}).fail((function(){c.markApiError("An error occurred while submitting your data. Please try again").show(),s.tve_form_loading(!0)})).done((function(r){a.hasFileUpload()&&l&&l.clear(),s.find('input[type="password"]').trigger("keyup");let d="";try{var f=r.form_messages||{},g="";if(r.redirect&&(g=r.redirect,delete r.redirect),delete r.form_messages,r.variation&&delete r.variation,r.back_url){var m=r.back_url;delete r.back_url}var w=Object.keys(r).length>0&&!r.error;if("object"==typeof r.error_message&&r.error_message.length){const t=r.error_message;let a="";t.forEach((t=>{"string"==typeof t&&t.length&&(t=t.trim(),c.markApiError(t).show(),a+=t+"\n")})),s.tve_form_loading(!0),a.length&&(d=a,e.toast(a,!0))}if(r.error){if(r.error_code){const e=r.error_code,a=t.Event("lead_conversion_error_code.tcb",{form_data:v,$form:s,$leadGeneration:o,errorCode:e});s.trigger(a)}if("captcha"===r.field){const t=n.recaptcha||r.error;c.markApiError(t).show(),s.tve_form_loading(!0)}else p(w,f);return i.preventDefault(),!1}if(d.length)return s.tve_form_loading(!0),i.preventDefault(),!1}catch(t){console.log(t)}const y=t.Event("lead_conversion_success.tcb",{form_data:v,$form:s,$leadGeneration:o});return s.trigger(y),y.content_unlocked&&"message"!==b&&"state"!==b?(i.preventDefault(),!1):(_(),h(w,g,void 0!==m?m:"")?(s.tve_form_loading(!0),void u()):(u(),0===d.length&&p(w,f),!0))})).always((()=>{"undefined"!=typeof grecaptcha&&"function"==typeof grecaptcha.reset&&(!tve_dash_front.recaptcha.connection||tve_dash_front.recaptcha.connection&&"v3"!==tve_dash_front.recaptcha.connection.version)&&grecaptcha.reset()})),i.stopPropagation(),!1}const x=t.Event("should_submit_form.tcb");if(s.trigger(x),"1"!==s.find("input#_asset_option").val()&&!x.flag_need_data)return!0;let k=s.serialize()+"&action=tve_custom_form_submit&email="+function(t){if(t.find('[data-validation="email"]').length)return t.find('[data-validation="email"]').val();let e="";return t.find("input").each((function(){if(this.name&&this.name.match(/email/i))return e=this.value,!1})),e}(s)+"&name="+function(e){let a=!1;return e.find("input").each((function(){const e=t(this),r=e.attr("placeholder"),n=e.attr("name");if(r&&-1!==r.toLowerCase().indexOf("name")||n&&-1!==n.toLowerCase().indexOf("name"))return a=e,!1})),!1!==a?a.val():""}(s);const C=t.Event("form_conversion.tcb");return s.trigger(C),C.post_data&&(k+="&"+t.param(C.post_data)),tve_frontend_options.post_id&&(k+="&post_id="+tve_frontend_options.post_id),t.ajax({type:"post",xhrFields:{withCredentials:!0},url:tve_frontend_options.ajaxurl,data:k}).always((function(){s.find("input,select,textarea").removeAttr("disabled"),s.find(".tve-form-button").removeClass("tar-disabled"),s.data("tve-force-submit",!0).submit()})),!1};s.on("submit",(function(e){const a=this;return t(this).find(".tve-captcha-container").length&&tve_dash_front.recaptcha.connection&&"v3"===tve_dash_front.recaptcha.connection.version?(grecaptcha.ready((function(){grecaptcha.execute(tve_dash_front.recaptcha.site_key,{action:"submit"}).then((function(t){i(e,a,t)}))})),!1):i(e,a)}))}()}))},e.setModuleLoadedStatus("lead-generation",!0)})(ThriveGlobal.$j,TCB_Front);